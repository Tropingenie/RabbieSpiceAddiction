<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <!-- Remove everCurableByItem -->
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/HediffDef[defName="PlanetariumAddiction"]/everCurableByItem</xpath>
  </Operation>
  <!-- Change label to "Spice Withdrawl" -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/HediffDef[defName="PlanetariumAddiction"]/stages/li[2]/label</xpath>
    <value>
      <label>Spice Withdrawl</label>
    </value>
  </Operation>
  <!-- Add withdrawal "The Spice Must Flow" -->
  <Operation Class="PatchOperationInsert">
    <xpath>Defs/HediffDef[defName="PlanetariumAddiction"]</xpath>
    <order>Append</order>
    <value>
        <ThoughtDef>
            <defName>PlanetariumWithdrawal</defName>
            <workerClass>ThoughtWorker_Hediff</workerClass>
            <hediff>PlanetariumAddiction</hediff>
            <validWhileDespawned>true</validWhileDespawned>
            <developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
            <stages>
            <li>
                <visible>false</visible>
            </li>
            <li>
                <label>spice withdrawal</label>
                <description>The spice must flow...</description>
                <baseMoodEffect>-20</baseMoodEffect>
            </li>
            </stages>
        </ThoughtDef>
    </value>
  </Operation>
  <!-- Add severity reduction -->
  <Operation Class="PatchOperationInsert">
    <xpath>/Defs/HediffDef[@ParentName="AddictionBase"]/comps</xpath>
    <value>
      <li Class="HediffCompProperties_SeverityPerDay">
        <!-- debug: copied from smokeleaf -->
        <severityPerDay>-0.0333</severityPerDay>
        <showDaysToRecover>true</showDaysToRecover>
      </li>
    </value>
  </Operation>
</Patch>